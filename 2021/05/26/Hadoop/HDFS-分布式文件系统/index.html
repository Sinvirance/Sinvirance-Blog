<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="HDFS 分布式文件系统1. HDFS 简介 The Hadoop Distributed File System (HDFS) is a distributed file system designed to run on commodity hardware. It has many similarities with existing distributed file systems. Ho">
<meta property="og:type" content="article">
<meta property="og:title" content="HDFS 分布式文件系统">
<meta property="og:url" content="http://example.com/2021/05/26/Hadoop/HDFS-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="Sinvirance Blog">
<meta property="og:description" content="HDFS 分布式文件系统1. HDFS 简介 The Hadoop Distributed File System (HDFS) is a distributed file system designed to run on commodity hardware. It has many similarities with existing distributed file systems. Ho">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://img.sinvirance.ltd/blog/Hadoop/NameNode 元数据信息.png">
<meta property="og:image" content="http://img.sinvirance.ltd/blog/Hadoop/Windows10Hadoop%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png">
<meta property="article:published_time" content="2021-05-26T08:50:39.000Z">
<meta property="article:modified_time" content="2021-05-27T12:43:29.029Z">
<meta property="article:author" content="Sinvirance">
<meta property="article:tag" content="分布式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.sinvirance.ltd/blog/Hadoop/NameNode 元数据信息.png">

<link rel="canonical" href="http://example.com/2021/05/26/Hadoop/HDFS-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>HDFS 分布式文件系统 | Sinvirance Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Sinvirance Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Sinvirance Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Lemon</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/sinvirance" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/26/Hadoop/HDFS-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.png">
      <meta itemprop="name" content="Sinvirance">
      <meta itemprop="description" content="有时间绝望的话，还不如吃点好吃的去睡觉呢!">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sinvirance Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          HDFS 分布式文件系统
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-26 16:50:39" itemprop="dateCreated datePublished" datetime="2021-05-26T16:50:39+08:00">2021-05-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-27 20:43:29" itemprop="dateModified" datetime="2021-05-27T20:43:29+08:00">2021-05-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop/" itemprop="url" rel="index"><span itemprop="name">Hadoop</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="HDFS-分布式文件系统"><a href="#HDFS-分布式文件系统" class="headerlink" title="HDFS 分布式文件系统"></a>HDFS 分布式文件系统</h2><h3 id="1-HDFS-简介"><a href="#1-HDFS-简介" class="headerlink" title="1. HDFS 简介"></a>1. HDFS 简介</h3><blockquote>
<p>The Hadoop Distributed File System (HDFS) is a distributed file system designed to run on commodity hardware. It has many similarities with existing distributed file systems. However, the differences from other distributed file systems are significant. HDFS is highly fault-tolerant and is designed to be deployed on low-cost hardware. HDFS provides high throughput access to application data and is suitable for applications that have large data sets. HDFS relaxes a few POSIX requirements to enable streaming access to file system data. HDFS was originally built as infrastructure for the Apache Nutch web search engine project. HDFS is part of the Apache Hadoop Core project.</p>
</blockquote>
<ul>
<li><p>Distributed： 分布式</p>
</li>
<li><p>run on commodity hardware: 运行在通用硬件</p>
</li>
<li><p>highly fault-tolerant: 高容错</p>
</li>
<li><p>highly throughput: 高吞吐</p>
<a id="more"></a>

</li>
</ul>
<h3 id="2-HDFS-的重要概念"><a href="#2-HDFS-的重要概念" class="headerlink" title="2. HDFS 的重要概念"></a>2. HDFS 的重要概念</h3><ul>
<li><p><strong>Master/Slave 架构</strong></p>
<p>HDFS 集群往往是一个 NameNode（HA 架构或者联邦机制可能会有多个 NameNode） + 多个 DataNode 组成</p>
<p>NameNode 是集群的主节点，DataNode 是集群的从节点</p>
</li>
</ul>
<ul>
<li><p><strong>分块存储（block 机制）</strong></p>
<p>HDFS 中的文件在物理上是分块存储在不同节点的，块的大小可通过配置参数来决定，Hadoop2.x 默认的 block 大小为 128M</p>
</li>
<li><p><strong>命名空间（NameSpace）</strong></p>
<p>HDFS 支持传统的层次型文件组织结构（也就是是类似 Windows 或 Linux 的目录形式），用户或者应用程序可以创建目录并将文件保存在目录中</p>
<p>NameNode 负责维护文件系统的名字空间，任何对文件系统的名字空间或者属性的修改都将被 NameNode 记录下来</p>
<p>HDFS 提供给客户一个抽象目录树，访问形式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hdfs://NameNode的HostName:port/test/input.mp4</span><br><span class="line">hdfs://centos100:9000/test/input.mp4</span><br></pre></td></tr></table></figure></li>
<li><p><strong>NameNode 元数据</strong></p>
<p>目录结构以及文件存储的分块位置信息叫做元数据</p>
<img src="http://img.sinvirance.ltd/blog/Hadoop/NameNode 元数据信息.png" alt="blog/Hadoop/NameNode 元数据信息.png" style="zoom: 67%;" />
</li>
<li><p><strong>DataNode 数据存储</strong></p>
<p>文件的各个 Block 具体存储由 DataNode 节点承担，DataNoda 会定时向 NameNode 汇报自己持有的 Block 信息</p>
</li>
<li><p><strong>副本机制</strong></p>
<p>为了实现容错，文件的所有 Block 都会被进行副本复制，每个文件的 Block 的大小和副本系数都是可配置的，应用程序可以指定某个文件的副本数目，副本系数可以文件创建的时候指定，也可以在之后改变，副本数量默认3个</p>
</li>
<li><p><strong>一次写入，多次读出</strong></p>
<p>HDFS 文件只支持写入一次，除了截断或者追加，并且，在任意时刻，只能由一个写入器，所以，HDFS 不支持并发写入</p>
<p>因此 HDFS 适合用来做大数据的底层存储服务，不适合用来做网盘等应用</p>
</li>
</ul>
<h3 id="3-HDFS-架构"><a href="#3-HDFS-架构" class="headerlink" title="3. HDFS 架构"></a>3. HDFS 架构</h3><p>![HDFS 详细架构图](<a target="_blank" rel="noopener" href="http://img.sinvirance.ltd/blog/Hadoop/HDFS">http://img.sinvirance.ltd/blog/Hadoop/HDFS</a> 详细架构图.png))</p>
<ul>
<li>NameNode(nn)：HDFS 集群的 Master 管理者<ul>
<li>维护 HDFS 的名称空间（NameSpace）</li>
<li>维护副本管理策略</li>
<li>记录文件的元数据信息</li>
<li>负责处理客户端的读写请求</li>
</ul>
</li>
<li>DataNode(dn)：NameNode 下达指令，DataNode 实际操作，Slave<ul>
<li>保存实际的数据块 Block</li>
<li>负责数据块的读写</li>
</ul>
</li>
<li>Clinet<ul>
<li>上传文件到 HDFS 时，Clinet 负责将文件切分成 Block 再上传</li>
<li>与 NameNode 交互，获取文件的 元数据信息</li>
<li>读取或者写入文件，与 DataNode 交互</li>
<li>用命令来管理或者访问 HDFS</li>
</ul>
</li>
</ul>
<h3 id="4-HDFS-Client-操作"><a href="#4-HDFS-Client-操作" class="headerlink" title="4. HDFS Client 操作"></a>4. HDFS Client 操作</h3><h4 id="4-1-Shell-命令操作"><a href="#4-1-Shell-命令操作" class="headerlink" title="4.1 Shell 命令操作"></a>4.1 Shell 命令操作</h4><ul>
<li><p>基本语法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/hdfs dfs 具体命令 </span><br><span class="line">bin/hadoop fs 具体命令  ## hadoop3.x不推荐使用</span><br></pre></td></tr></table></figure>
</li>
<li><p>常见参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">```shell</span><br><span class="line"> [root@centos100 hadoop-2.9.2]# hdfs dfs</span><br><span class="line"> Usage: hadoop fs [generic options]</span><br><span class="line"> 	[-appendToFile &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line"> 	[-cat [-ignoreCrc] &lt;src&gt; ...]</span><br><span class="line"> 	[-checksum &lt;src&gt; ...]</span><br><span class="line"> 	[-chgrp [-R] GROUP PATH...]</span><br><span class="line"> 	[-chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; PATH...]</span><br><span class="line"> 	[-chown [-R] [OWNER][:[GROUP]] PATH...]</span><br><span class="line"> 	[-copyFromLocal [-f] [-p] [-l] [-d] &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line"> 	[-copyToLocal [-f] [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]</span><br><span class="line"> 	[-count [-q] [-h] [-v] [-t [&lt;storage type&gt;]] [-u] [-x] &lt;path&gt; ...]</span><br><span class="line"> 	[-cp [-f] [-p | -p[topax]] [-d] &lt;src&gt; ... &lt;dst&gt;]</span><br><span class="line"> 	[-createSnapshot &lt;snapshotDir&gt; [&lt;snapshotName&gt;]]</span><br><span class="line"> 	[-deleteSnapshot &lt;snapshotDir&gt; &lt;snapshotName&gt;]</span><br><span class="line"> 	[-df [-h] [&lt;path&gt; ...]]</span><br><span class="line"> 	[-du [-s] [-h] [-x] &lt;path&gt; ...]</span><br><span class="line"> 	[-expunge]</span><br><span class="line"> 	[-find &lt;path&gt; ... &lt;expression&gt; ...]</span><br><span class="line"> 	[-get [-f] [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]</span><br><span class="line"> 	[-getfacl [-R] &lt;path&gt;]</span><br><span class="line"> 	[-getfattr [-R] &#123;-n name | -d&#125; [-e en] &lt;path&gt;]</span><br><span class="line"> 	[-getmerge [-nl] [-skip-empty-file] &lt;src&gt; &lt;localdst&gt;]</span><br><span class="line"> 	[-help [cmd ...]]</span><br><span class="line"> 	[-ls [-C] [-d] [-h] [-q] [-R] [-t] [-S] [-r] [-u] [&lt;path&gt; ...]]</span><br><span class="line"> 	[-mkdir [-p] &lt;path&gt; ...]</span><br><span class="line"> 	[-moveFromLocal &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line"> 	[-moveToLocal &lt;src&gt; &lt;localdst&gt;]</span><br><span class="line"> 	[-mv &lt;src&gt; ... &lt;dst&gt;]</span><br><span class="line"> 	[-put [-f] [-p] [-l] [-d] &lt;localsrc&gt; ... &lt;dst&gt;]</span><br><span class="line"> 	[-renameSnapshot &lt;snapshotDir&gt; &lt;oldName&gt; &lt;newName&gt;]</span><br><span class="line"> 	[-rm [-f] [-r|-R] [-skipTrash] [-safely] &lt;src&gt; ...]</span><br><span class="line"> 	[-rmdir [--ignore-fail-on-non-empty] &lt;dir&gt; ...]</span><br><span class="line"> 	[-setfacl [-R] [&#123;-b|-k&#125; &#123;-m|-x &lt;acl_spec&gt;&#125; &lt;path&gt;]|[--set &lt;acl_spec&gt; &lt;path&gt;]]</span><br><span class="line"> 	[-setfattr &#123;-n name [-v value] | -x name&#125; &lt;path&gt;]</span><br><span class="line"> 	[-setrep [-R] [-w] &lt;rep&gt; &lt;path&gt; ...]</span><br><span class="line"> 	[-stat [format] &lt;path&gt; ...]</span><br><span class="line"> 	[-tail [-f] &lt;file&gt;]</span><br><span class="line"> 	[-test -[defsz] &lt;path&gt;]</span><br><span class="line"> 	[-text [-ignoreCrc] &lt;src&gt; ...]</span><br><span class="line"> 	[-touchz &lt;path&gt; ...]</span><br><span class="line"> 	[-truncate [-w] &lt;length&gt; &lt;path&gt; ...]</span><br><span class="line"> 	[-usage [cmd ...]]</span><br><span class="line"> </span><br><span class="line"> Generic options supported are:</span><br><span class="line"> -conf &lt;configuration file&gt;        specify an application configuration file</span><br><span class="line"> -D &lt;property=value&gt;               define a value for a given property</span><br><span class="line"> -fs &lt;file:///|hdfs://namenode:port&gt; specify default filesystem URL to use, overrides &#x27;fs.defaultFS&#x27; property from configurations.</span><br><span class="line"> -jt &lt;local|resourcemanager:port&gt;  specify a ResourceManager</span><br><span class="line"> -files &lt;file1,...&gt;                specify a comma-separated list of files to be copied to the map reduce cluster</span><br><span class="line"> -libjars &lt;jar1,...&gt;               specify a comma-separated list of jar files to be included in the classpath</span><br><span class="line"> -archives &lt;archive1,...&gt;          specify a comma-separated list of archives to be unarchived on the compute machines</span><br><span class="line"> </span><br><span class="line"> The general command line syntax is:</span><br><span class="line"> command [genericOptions] [commandOptions]</span><br></pre></td></tr></table></figure>
</li>
<li><p>HDFS 命令演示</p>
<ul>
<li><p>-help：输出命令参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# vi hdfs.txt </span><br><span class="line">[root@centos100 hadoop-2.9.2]# cat hdfs.txt </span><br><span class="line">hdfs</span><br></pre></td></tr></table></figure></li>
<li><p>-chgrp、-chmod、-chown：修改文件所属权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /</span><br><span class="line">-rw-r--r--   3 root supergroup         12 2021-05-26 22:37 /hdfs.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改读写权限</span></span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -chmod 666 /hdfs.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /</span><br><span class="line">-rw-rw-rw-   3 root supergroup         12 2021-05-26 22:37 /hdfs.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改所属用户或者用户组</span></span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -chown root:root /hdfs.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /</span><br><span class="line">-rw-rw-rw-   3 root root               12 2021-05-26 22:37 /hdfs.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 更改文件用户组</span></span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -chgrp supergroup /hdfs.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /</span><br><span class="line">-rw-rw-rw-   3 root supergroup         12 2021-05-26 22:37 /hdfs.txt</span><br></pre></td></tr></table></figure></li>
<li><p>-moveFromLocal：从本地移动到 HDFS（剪切）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# vi hdfs.txt </span><br><span class="line">[root@centos100 hadoop-2.9.2]# cat hdfs.txt </span><br><span class="line">hdfs</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -moveFromLocal ./hdfs.txt /</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /</span><br><span class="line">-rw-r--r--   3 root supergroup          5 2021-05-26 22:10 /hdfs.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -cat /hdfs.txt</span><br><span class="line">hdfs</span><br></pre></td></tr></table></figure></li>
<li><p>-appendToFile：追加一个文件到已经存在文件末尾</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# vi hadoop.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# cat hadoop.txt</span><br><span class="line">hadoop</span><br><span class="line">=</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -appendToFile hadoop.txt /hdfs.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -cat /hdfs.txt</span><br><span class="line">hdfs</span><br><span class="line">hadoop</span><br></pre></td></tr></table></figure></li>
<li><p>-copyToLocal：从 HDFS 拷贝到 本地</p>
<p>-get：等同于 copyToLocal，从 HDFS 下载到本地</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -copyToLocal /get.txt ./</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -get /get.txt ./</span><br></pre></td></tr></table></figure></li>
<li><p>-copyFromLocal：从本地文件拷贝到 HDFS 中</p>
<p>-put：等同于 copyFromLocal，从 HDFS 上传到本地</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -copyFromLocal put.txt /</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -get put.txt /</span><br></pre></td></tr></table></figure></li>
<li><p>-du：统计文件夹大小信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -du &#x2F;wcinput</span><br><span class="line">61  &#x2F;wcinput&#x2F;wc.txt</span><br></pre></td></tr></table></figure></li>
<li><p>-setrep：设置HDFS 文件副本数量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /hadoop.txt</span><br><span class="line">-rw-r--r--   3 root supergroup          7 2021-05-26 23:03 /hadoop.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -setrep 10 /hadoop.txt</span><br><span class="line">Replication 10 set: /hadoop.txt</span><br><span class="line">[root@centos100 hadoop-2.9.2]# hdfs dfs -ls /hadoop.txt</span><br><span class="line">-rw-r--r--  10 root supergroup          7 2021-05-26 23:03 /hadoop.txt</span><br></pre></td></tr></table></figure>
<p>注意：这里设置的副本数量只是记录在 NameNode 上的元数据中，真正的副本数量取决与实际存在的 DataNode 数量</p>
</li>
</ul>
</li>
</ul>
<h4 id="4-2-Java-API-操作"><a href="#4-2-Java-API-操作" class="headerlink" title="4.2 Java API 操作"></a>4.2 Java API 操作</h4><ol>
<li><p>在 Windows10 中 解压 Hadoop，并配置系统环境变量，注意，Hadoop 和 Java 路径不能出现空格和中文字符</p>
<p>验证 Hadoop 和 JDK 配置</p>
</li>
</ol>
<p>​      <img src="http://img.sinvirance.ltd/blog/Hadoop/Windows10Hadoop%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" alt="Windows10Hadoop环境变量配置成功"></p>
<ol start="2">
<li><p>创建 Maven 项目，引入 Hadoop 依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"># pom.xml</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-client --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.10.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>配置 log4j 日志</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src/resource/log4j.properties</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">INFO, stdout</span></span><br><span class="line"><span class="comment">### 输出信息到控制台 ###</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span> = <span class="string">[%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span></span><br><span class="line"></span><br><span class="line"><span class="meta">log4j.appender.logfile</span>=<span class="string">org.apache.log4j.FileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.logfile.File</span>=<span class="string">target/spring.log</span></span><br><span class="line"><span class="meta">log4j.appender.logfile.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.logfile.layout.ConversionPattern</span> = <span class="string">[%-5p] %d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; method:%l%n%m%n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>




</li>
</ol>

    </div>

    
    
    
        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag"># 分布式</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/05/23/Hadoop/Hadoop-%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/" rel="prev" title="Hadoop 集群搭建">
      <i class="fa fa-chevron-left"></i> Hadoop 集群搭建
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/05/27/Java/Log4j2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" rel="next" title="Log4j2 基本使用">
      Log4j2 基本使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#HDFS-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="nav-text">HDFS 分布式文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-HDFS-%E7%AE%80%E4%BB%8B"><span class="nav-text">1. HDFS 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-HDFS-%E7%9A%84%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5"><span class="nav-text">2. HDFS 的重要概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-HDFS-%E6%9E%B6%E6%9E%84"><span class="nav-text">3. HDFS 架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-HDFS-Client-%E6%93%8D%E4%BD%9C"><span class="nav-text">4. HDFS Client 操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-Shell-%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C"><span class="nav-text">4.1 Shell 命令操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-Java-API-%E6%93%8D%E4%BD%9C"><span class="nav-text">4.2 Java API 操作</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Sinvirance"
      src="/images/header.png">
  <p class="site-author-name" itemprop="name">Sinvirance</p>
  <div class="site-description" itemprop="description">有时间绝望的话，还不如吃点好吃的去睡觉呢!</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Sinvirance" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Sinvirance" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sinvirance</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
